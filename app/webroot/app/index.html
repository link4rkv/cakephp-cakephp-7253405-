<html ng-app="my-app" ng-app lang="en">
<head>
    <?php print $this->Html->css("bootstrap.min");
  print $this->Html->script("angular.min"); ?>
    <meta charset="utf-8">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
    ul>li, a{cursor: pointer;}
    </style>
    <title>Sales Order</title>
</head>
<body>
<div class="navbar navbar-default" id="navbar">
    <div class="container" id="navbar-container">
    <div class="navbar-header">
        <h3>Coding Exercise </h3>
        </div>
    </div>
</div>


<div ng-controller="SalesController">
<div class="container">
<br/>
<blockquote><h4>Sales Order</h4></blockquote>
<br/>
    <div class="row">
        <div class="col-md-4">
            <h4>15 Orders</h4>
        </div>
    </div>
    <br/>
    <?php if(isset($sales) && !empty($sales)) { 
        ?> 
    <div class="row">
        <div class="col-md-12" ng-show="filteredItems > 0">
            <table class="table table-striped table-bordered">
            <thead>
            <th>Order id&nbsp;<a ng-click="sort_by('orderId');"></a></th>
            <th>Customer Name&nbsp;<a ng-click="sort_by('customerName');"></a></th>
            <th>Products&nbsp;</th>
            <th>Order Date&nbsp;<a ng-click="sort_by('orderDate');"></a></th>
            <!-- <th><?php echo $this->paginator->sort('order_value', 'Order Value'); ?></th> -->
            <th><a href="" ng-click="changeSort('order_value');">Order Value&nbsp;</a></th>  
            
            <th>Tax Percentage&nbsp;</th>
            <th>Tax Amount&nbsp;</th>
            </thead>
            <tbody>
            <tr ng-repeat="sale in sales">
                <?php 
         // echo "<pre>"; print_r($sales); die();
                  // echo json_encode($sales); 

    // foreach ($sales as $sale): ?>
    <tr>
        <td><?php // echo $sale['Sale']['id']; ?></td>
        <td><?php // echo $sale['Sale']['Customer']['name']; ?></td>
         <td><?php // echo $sale['Product']['name'] ?></td>
        <td>
            <?php // echo $this->Html->link($sale['Sale']['order_date'],
// array('controller' => 'sales', 'action' => 'view', $sale['Sale']['id'])); 
            // echo $sale['Sale']['order_date']; ?>
        </td>

        <!-- <td><?php //echo $sale['Sale']['order_value']; ?></td> -->
        <td>{{sale.Sale.order_value}}</td>
        <td><?php // echo $sale['Sale']['tax_percentage']; ?></td>
        <td><?php //echo $sale['Sale']['tax_amount']; ?></td>
    </tr>
    <?php // endforeach; ?>
    <?php // unset($sale); ?>
    
                </tr>
            </tbody>
            </table>
        </div>
        
    </div><?php } ?>
</div>
</div>
<script>
/*function SalesCtrl($scope, $http)
{
$http({method: 'POST', url: 'js/posts.json'}).success(function(data)
{

  $scope.res_sale = $resource('/sales/:action.json',{
            'action' : '@action'
        }
            $scope._data = sales;
            }
        
 $scope.sort_by = function(predicate) {
 $scope.predicate = predicate;
 $scope.reverse = !$scope.reverse;
 };
});*/
/*function SalesController($scope, $http)
{
 $http.get('data/index.json').
    success(function(data, status, headers, config) {
      $scope.sales = data;
    });
}*/
/*function SalesController($scope, $http){  

$scope.changeSort = function(value){
    $scope.sort = "name";
    $scope.reverse = false;

    if ($scope.sort == value){
      $scope.reverse = !$scope.reverse;
      return;
    }

    $scope.sort = value;
    $scope.reverse = false;
    }
}*/
function SalesController($scope, $http) {
    $http.get('data/index.json').success(function(data) {
        $scope.sales = data.sales;
    });
}
</script>
<script src="js/angular.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>
<script src="js/ui-bootstrap-tpls-0.10.0.min.js"></script>
<script src="app/app.js"></script>
<?php echo $this->Js->writeBuffer(); ?>         
    </body>
</html>
